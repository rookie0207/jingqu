<template>
  <div class="yemeng55">
    <!--    å·¦ä¾§å¯¼èˆªæ -->
    <div class="div1">
      <ul class="list-group shadow">
        <router-link to="/yemeng51"> <li class="list-group-item">æ¸¸å®¢ä¿¡æ¯ç®¡ç†</li></router-link>
        <router-link to="/yemeng52"> <li class="list-group-item">å‘˜å·¥ä¿¡æ¯ç®¡ç†</li></router-link>
        <router-link to="/yemeng53"> <li class="list-group-item">æ™¯åŒºè¯„è®ºç®¡ç†</li></router-link>
        <router-link to="/yemeng54"><li class="list-group-item">æ™¯ç‚¹ä¿¡æ¯ç®¡ç†</li></router-link>
        <router-link to="/yemeng55"> <li class="list-group-item">å…¬å‘Šç®¡ç†</li></router-link>
        <router-link to="/yemeng56"> <li class="list-group-item">æ•°æ®å¯è§†åŒ–</li></router-link>
        <router-link to="/yemeng57"> <li class="list-group-item">ç•™è¨€æ¿ç®¡ç†</li></router-link>
      </ul>
    </div>


    <div class="div2 shadow">

      <el-input
          v-model="textarea"
          style="width: 1100px;height: 310px;"
          :rows="15"
          type="textarea"
          placeholder="è¾“å…¥å…¬å‘Šå†…å®¹"
      />

      <div class="demo-date-picker">
        <div class="block">
          <span class="demonstration">é€‰æ‹©å‘å¸ƒæ—¶é—´</span>
          <el-date-picker
              v-model="value1"
              type="date"
              placeholder="Pick a date"
              :default-value="new Date(2024, 5, 1)"
          />
        </div>
<!--        <div class="block">-->
<!--          <span class="demonstration">é€‰æ‹©å…¬å‘Šå‘å¸ƒæ—¥æœŸ</span>-->
<!--          <el-date-picker-->
<!--              v-model="value2"-->
<!--              type="date"-->
<!--              placeholder="Pick a day"-->
<!--              :disabled-date="disabledDate"-->
<!--              :shortcuts="shortcuts"-->
<!--              :size="size"-->
<!--          />-->
<!--        </div >-->
        <div class="block">
          <span class="demonstration">è¾“å…¥å‘å¸ƒäººæˆ–å‘å¸ƒå•ä½</span>
          <el-input v-model="input" style="width: 240px;" placeholder="å‘å¸ƒäºº" />
        </div>

      </div>
      <el-button type="primary" style="margin-left: 480px" @click="announcement">å‘å¸ƒ</el-button>
      <el-button type="primary" plain @click="drawer = true">æŸ¥çœ‹å†å²å…¬å‘Š</el-button>

      <el-dialog v-model="dialogTableVisible" title="å†å²å…¬å‘Šè¯¦æƒ…" width="800">
<!--        <pre>-->
<!--                                                     å‘èµ·æ—¶é—´ï¼š2024.2.6        å‘å¸ƒäººï¼šå•Šé£’é£’-->
<!--           äº²çˆ±çš„æ¸¸å®¢ä»¬ï¼Œ-->
<!--            æ¬¢è¿æ¥åˆ°æˆ‘ä»¬ç¾ä¸½çš„æ™¯åŒºï¼Œæ‚¨çš„åˆ°æ¥æ˜¯æˆ‘ä»¬æœ€å¤§çš„è£å¹¸ï¼åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åŠªåŠ›æä¾›ç»™æ‚¨ä¸€ä¸ªéš¾å¿˜çš„æ—…è¡Œä½“éªŒã€‚-->
<!--                                                   ğŸŒ² **æ–°æ™¯ç‚¹å¼€æ”¾ï¼** ğŸŒ²-->
<!--            æ¢ç´¢æˆ‘ä»¬æœ€æ–°å¼€æ”¾çš„æ™¯ç‚¹â€”â€”æ¢¦å¹»èŠ±æµ·ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å°†è¢«äº”å½©æ–‘æ–“çš„èŠ±æœµæ‰€åŒ…å›´ï¼Œæ„Ÿå—å¤§è‡ªç„¶çš„å¥‡å¦™ä¹‹ç¾ã€‚-->
<!--                                                   ğŸ‰ **ç‰¹åˆ«æ´»åŠ¨é€šçŸ¥** ğŸ‰-->
<!--            æœ¬å‘¨æœ«æˆ‘ä»¬å°†ä¸¾åŠå¤œé—´æ˜Ÿç©ºè§‚èµæ´»åŠ¨ã€‚ä¸€èµ·æ¥æ¬£èµæ¸…æ¾ˆçš„æ˜Ÿç©ºï¼Œæ„Ÿå—å¤§è‡ªç„¶çš„ç¥ç§˜é­…åŠ›ã€‚æ•¬è¯·æå‰é¢„è®¢åé¢ï¼-->
<!--                                                    ğŸ½ **ç¾é£Ÿæ¨è** ğŸ½-->
<!--            å°è¯•æˆ‘ä»¬æ™¯åŒºå†…çš„å„ç±»ç¾é£Ÿï¼Œä»åœ°é“çš„å½“åœ°å°åƒåˆ°ç²¾è‡´çš„é¤å…ï¼Œæ»¡è¶³æ‚¨æŒ‘å‰”çš„å‘³è•¾ã€‚-->
<!--                                                     ğŸ“… **å¼€æ”¾æ—¶é—´** ğŸ“…-->
<!--                                           - å‘¨ä¸€è‡³å‘¨äº”ï¼š9:00 AM - 6:00 PM-->
<!--                                           - å‘¨æœ«å’ŒèŠ‚å‡æ—¥ï¼š9:00 AM - 8:00 PM-->
<!--                                                     ğŸ« **é—¨ç¥¨ä¿¡æ¯** ğŸ«-->
<!--                                                        æˆäººï¼šÂ¥100-->
<!--                                                     å„¿ç«¥ï¼ˆ3-12å²ï¼‰ï¼šÂ¥50-->
<!--                                                     å©´å„¿ï¼ˆ3å²ä»¥ä¸‹ï¼‰ï¼šå…è´¹-->
<!--                                       æ„Ÿè°¢æ‚¨é€‰æ‹©æˆ‘ä»¬çš„æ™¯åŒºï¼Œæˆ‘ä»¬æœŸå¾…ä¸æ‚¨å…±åº¦ç¾å¥½æ—¶å…‰ï¼-->
<!--                                       å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·éšæ—¶å‘æˆ‘ä»¬çš„å·¥ä½œäººå‘˜å’¨è¯¢ã€‚-->
<!--                                                      ç¥æ‚¨æœ‰ä¸€ä¸ªæ„‰å¿«çš„æ—…è¡Œï¼-->
<!--        </pre>-->
        <div>
          <p style="font-size: 30px">
            å‘å¸ƒäººæˆ–å•ä½ï¼š{{this.onlyAll.name}}
          </p>
          <p style="font-size: 25px">
            å‘å¸ƒæ—¶é—´ï¼š{{this.onlyAll.time}}
          </p>

            {{this.onlyAll.text}}

        </div>
        <el-button type="danger" style="margin-left: 350px" @click="delete1">åˆ é™¤</el-button>
      </el-dialog>

      <el-drawer v-model="drawer" title="I am the title" :with-header="false">
<!--        <el-button style="width: 160px;margin-left: 12px" @click="dialogTableVisible = true">2024-4-12æœŸå…¬å‘Š</el-button>-->

        <div class="container">
          <div class="left-div">
        <div v-for="announce in All" :key="announce.id">
          <div v-if="announce.id % 2 !== 0">
          <el-button style="width: 160px;" @click="dialogTableVisible = true;this.onlyAll.name=announce.name;this.onlyAll.time=announce.time;this.onlyAll.text=announce.text;this.onlyAll.id=announce.id;">{{announce.time}}æœŸå…¬å‘Š</el-button>
          </div>
        </div>

          </div>

          <div class="right-div">
            <div v-for="announce in All" :key="announce.id">
              <div v-if="announce.id % 2 === 0">
                <el-button style="width: 160px;" @click="dialogTableVisible = true;this.onlyAll.name=announce.name;this.onlyAll.time=announce.time;this.onlyAll.text=announce.text;this.onlyAll.id=announce.id;">{{announce.time}}æœŸå…¬å‘Š</el-button>
              </div>
            </div>
          </div>
        </div>
      </el-drawer>
    </div>

  </div>
</template>

<script>
 import axios from "axios";
export default {
  name: "YeMeng55",
  data(){
    return{
      textarea:'',//å…¬å‘Šå†…å®¹
      input:'',//å‘å¸ƒäºº
      value1:'',
      dialogTableVisible:false,
      drawer:false,
      All:[],
      onlyAll:{
        name:'',
        time:'',
        text:'',
        id:0,
      }
      // size: 'large', // é»˜è®¤é€‰ä¸­çš„size
      // value2: '', // é€‰ä¸­çš„æ—¥æœŸ
      // shortcuts : [
      //   {
      //     text: 'ä»Šå¤©',
      //     value: new Date(),
      //   },
      //   {
      //     text: 'æ˜¨å¤©',
      //     value() {
      //       const date = new Date();
      //       date.setTime(date.getTime() - 3600 * 1000 * 24);
      //       return date;
      //     },
      //   },
      //   {
      //     text: 'ä¸€æ˜ŸæœŸå‰',
      //     value() {
      //       const date = new Date();
      //       date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);
      //       return date;
      //     },
      //   },
      // ],

    }
  },
  created(){
    this.getAll();
  },
  //ä¼ å…¥å…¶å®ƒç»„ä»¶
  components:{

  },
  methods: {
//     disabledDate(time) {
//       // è·å–value2çš„å€¼ï¼Œå‡è®¾å®ƒæ˜¯ä¸€ä¸ªæ—¥æœŸå¯¹è±¡
//       const date = new Date(this.value2);
// // å°†æ—¥æœŸå¯¹è±¡è½¬æ¢ä¸ºTIMESTAMPæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå¹¶æŒ‡å®šæ—¶åŒºä¸ºUTC
//       const timestampString = date.toLocaleString('en-US', { timeZone: 'UTC' }).replace(/,/, '');
//       console.log(timestampString);
//
//
//       return time.getTime() > Date.now();
//
//     },

    announcement(){
      // è·å–value1çš„å€¼ï¼Œå‡è®¾å®ƒæ˜¯ä¸€ä¸ªæ—¥æœŸå¯¹è±¡
      const date = new Date(this.value1);
      // è·å–å¹´ã€æœˆã€æ—¥
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      // æ‹¼æ¥æˆ'YYYY-MM-DD'æ ¼å¼çš„å­—ç¬¦ä¸²
      const formattedDate = `${year}-${month}-${day}`;
      console.log(formattedDate);

      axios.get(`http://localhost/Announcement/${formattedDate}/${this.input}/${this.textarea}`)
          .then(res=>{
            if(res.data===true) {
              this.$message({
                message: 'å‘å¸ƒå…¬å‘ŠæˆåŠŸ',
                type: 'success',
              })
            }
            else {
              this.$message({
                message: 'å‘å¸ƒå…¬å‘Šå¤±è´¥',
                type: 'error',
              })
            }
          })
    },
    getAll(){
      axios.get(`http://localhost/Announcement`)
          .then(res=>{
            this.All=res.data;
            console.log(this.All);
          })
    },
    delete1(){
      axios.get(`http://localhost/Announcement/delete/${this.onlyAll.id}`)
          .then(res=>{
            if(res.data===true) {
              this.$message({
                message: 'åˆ é™¤å…¬å‘ŠæˆåŠŸ',
                type: 'success',
              })
            }
            else {
              this.$message({
                message: 'åˆ é™¤å…¬å‘Šå¤±è´¥',
                type: 'error',
              })
            }
          })
    }
  }
}
</script>

<style scoped>
.yemeng55{

  display: flex;
}
.list-group-item{
  text-align: center;
}
.div1{
  margin-top: 50px;
  width: 200px;
  margin-left: 50px;
}
.div2{
  flex: 1;
  margin-top: 50px;
  margin-left: 100px;
  border: 1px solid #000; /*! è¾¹æ¡†æ ·å¼ï¼Œå¯æ ¹æ®éœ€è¦ä¿®æ”¹ !*/
  height: auto;
}



.demo-date-picker {
  display: flex;
  width: 100%;
  padding: 0;
  flex-wrap: wrap;
}

.demo-date-picker .block {
  padding: 30px 0;
  text-align: center;
  /*border-right: solid 1px var(--el-border-color);*/
  flex: 1;
}

.demo-date-picker .block:last-child {
  border-right: none;
}

.demo-date-picker .demonstration {
  display: block;
  /*color: var(--el-text-color-secondary);*/
  font-size: 14px;
  margin-bottom: 20px;
}
.container {
  display: flex;
}

.left-div, .right-div {
  flex: 1;
}

</style>